(window.webpackJsonpbackend=window.webpackJsonpbackend||[]).push([[0],{39:function(e,t,a){e.exports=a(86)},44:function(e,t,a){},86:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(34),r=a.n(l),o=(a(44),a(2)),i=a(13),u="/server/admin-tours/",s=function(){1===Number(localStorage.getItem("dev"))?"".concat(u,"templates/"):"".concat(u,"templates-fields/");return c.a.createElement("div",{className:"col-sm-3"},c.a.createElement("ul",{className:"nav flex-column"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:"".concat(u,"languages/"),className:"nav-link"},"\u042f\u0437\u044b\u043a\u0438")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:"".concat(u,"currencies/"),className:"nav-link"},"\u0412\u0430\u043b\u044e\u0442\u044b")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:"".concat(u,"locations/"),className:"nav-link"},"\u0413\u043e\u0440\u043e\u0434\u0430 \u0438 \u0441\u0442\u0440\u0430\u043d\u044b")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:"".concat(u,"poi/"),className:"nav-link"},"\u0414\u043e\u0441\u0442\u043e\u043f\u0440\u0438\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:"".concat(u,"tags/"),className:"nav-link"},"\u0422\u0435\u0433\u0438")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:"".concat(u,"settings/"),className:"nav-link"},"\u041b\u043e\u043a\u0430\u043b\u044c\u043d\u044b\u0435 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:"".concat(u,"templates/"),className:"nav-link"},"\u0428\u0430\u0431\u043b\u043e\u043d\u044b")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:"".concat(u,"generate/"),className:"nav-link"},"\u0413\u0435\u043d\u0435\u0440\u0430\u0442\u043e\u0440 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:"".concat(u,"codes/"),className:"nav-link"},"\u0412\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0435 \u043a\u043e\u0434\u044b")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:"".concat(u,"export/"),className:"nav-link"},"\u042d\u043a\u0441\u043f\u043e\u0440\u0442")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(o.c,{to:"".concat(u,"import/"),className:"nav-link"},"\u0418\u043c\u043f\u043e\u0440\u0442"))))},m=function(){return c.a.createElement("div",null,"Choose menu item")},d=a(7),f=a(1),p=function(){return c.a.createElement("div",{className:"text-center loader-block"},c.a.createElement("div",{className:"spinner-border text-success",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")))},b=function(e){var t=e.children;return c.a.createElement("div",{className:"alert alert-danger",role:"alert"},t)},v=a(14),E=a.n(v),g="https://qwart.digital/server/api/",h="https://qwart.digital/server",y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(console.log(e,t,n),n)return E.a[t](g+e,a);var c=new FormData;return a&&Object.keys(a).forEach((function(e){c.set(e,a[e])})),E.a[t](g+e,c)},O=a(11),j=a(9),N=function(e){var t=e.id,a=e.handleCheckbox,n=e.isChecked;return c.a.createElement("td",{className:"td-check"},c.a.createElement("div",{className:"form-check"},c.a.createElement("input",{type:"checkbox",className:"form-check-input delete-mark",name:t,value:"1",onChange:a,checked:n})))},k=function(e){var t=e.handleAllChecked;return c.a.createElement("p",null,c.a.createElement("a",{href:"/remove/",className:"check-all check-all-link",onClick:t},"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c \u0432\u0441\u0435"))},w=function(e){var t=e.handleRemoveAll;return c.a.createElement("button",{type:"button",className:"btn btn-danger",onClick:t},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u0435")},x=function(e){var t=e.edit,a=e.remove,n=e.id,l=e.view,r=void 0===l?null:l,i=r?c.a.createElement("a",{href:r,target:"_blank"},c.a.createElement("i",{className:"fa fa-eye","aria-hidden":"true"})):null,u=a?c.a.createElement("a",{href:"/",className:"color-red",onClick:function(e){e.preventDefault(),a(n)}},c.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})):null;return c.a.createElement("td",{className:"col-actions"},c.a.createElement(o.b,{to:t},c.a.createElement("i",{className:"far fa-edit"})),i,u)},S=function(e){var t=e.listItems,a=e.tableData,l=e.columnWithLink,r=e.actions,i=void 0===r?["edit","delete"]:r,u=e.setError,s=e.setIsLoading,m=e.setListItems,d=e.type,p=Object(n.useState)({}),b=Object(f.a)(p,2),v=b[0],E=b[1],g=Object(n.useState)(!1),S=Object(f.a)(g,2),_=S[0],C=S[1];if(Object(n.useEffect)((function(){0!==Object.entries(t).length&&E((function(){var e={};return t.forEach((function(t){e[t.id]=!1})),e}))}),[t]),0===Object.entries(t).length&&t.constructor===Object)return c.a.createElement("div",{className:"text-center"},"\u041d\u0435\u0442 \u044d\u043b\u0435\u043c\u0435\u043d\u0442\u043e\u0432 \u0434\u043b\u044f \u043f\u043e\u043a\u0430\u0437\u0430");var T=function(e){var t=e.target,a=t.checked,n=t.name;E(Object(j.a)({},v,Object(O.a)({},n,a)))},I=function(e){s(!0),y("".concat(d,"/").concat(e),"post",{_method:"DELETE"}).then((function(a){if(console.log(a),a.data.hasOwnProperty("error"))return u(a.data.error),s(!1),!1;m(t.filter((function(t){return t.id!==e}))),s(!1)}))},L=i.includes("show")?"show":"edit",D=t.map((function(e,t){if(0===Object.entries(v).length)return null;var n=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n="",c={edit:n+t+"/edit/"};return e.includes("show")&&(c.show=n+t+"/"),e.includes("view")&&(c.view="".concat(h,"/").concat(a.type,"/").concat(a.slug,".htm")),c}(i,e.id,e),r=a.map((function(t,a){return c.a.createElement("td",{key:a},a===l?c.a.createElement(o.b,{to:n[L]},e[t]):e[t])})),u=i.includes("delete")?c.a.createElement(N,{id:e.id,handleCheckbox:T,isChecked:v[e.id]}):null;return c.a.createElement("tr",{key:t},u,r,c.a.createElement(x,{edit:n.edit,view:n.view,remove:i.includes("delete")?I:null,id:e.id}))})),F=i.includes("delete")?c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-6"},c.a.createElement(k,{handleAllChecked:function(e){e.preventDefault();var t=!_;E((function(){var e={};return Object.keys(v).forEach((function(a){e[a]=t})),e})),C(t)}})),c.a.createElement("div",{className:"col-sm-6 text-right"},c.a.createElement(w,{handleRemoveAll:function(e){e.preventDefault(),s(!0);var a=[],n=[];Object.keys(v).forEach((function(e){!0===v[e]?a.push(Number(e)):n.push(Number(e))})),y("".concat(d,"/multiple"),"post",{_method:"DELETE",ids:a.join(",")}).then((function(e){if(console.log(e),e.data.hasOwnProperty("error"))return u(e.data.error),s(!1),!1;m(t.filter((function(e){return n.includes(Number(e.id))}))),s(!1)}))}}))):null;return c.a.createElement("div",null,F,c.a.createElement("table",{className:"table table-striped items-table"},c.a.createElement("tbody",null,D)))},_=function(e){var t=e.tableData,a=e.columnWithLink,l=e.actions,r=e.type,o=e.groupBy,i=void 0===o?null:o,u=e.extraParams,s=void 0===u?null:u,m=e.multilang,v=void 0!==m&&m,E=e.showTitle,g=void 0!==E&&E,h=e.paginationEnabled,O=void 0!==h&&h,j=e.requestMethod,N=void 0===j?"get":j,k=Object(n.useState)(null),w=Object(f.a)(k,2),x=w[0],_=w[1],C=Object(n.useState)(!0),T=Object(f.a)(C,2),I=T[0],L=T[1],D=Object(n.useState)({}),F=Object(f.a)(D,2),A=F[0],P=F[1],V=Object(n.useState)(window.localStorage.getItem("picked_lang")||"en"),U=Object(f.a)(V,2),W=U[0],M=(U[1],Object(n.useState)(null)),R=Object(f.a)(M,2),q=R[0],B=R[1],z=Object(n.useState)(),H=Object(f.a)(z,2),G=H[0],J=(H[1],Object(n.useState)(0)),Y=Object(f.a)(J,2),$=Y[0],K=Y[1],Q=Object(n.useState)(!1),X=Object(f.a)(Q,2),Z=X[0],ee=X[1],te=Object(n.useState)(!1),ae=Object(f.a)(te,2),ne=ae[0],ce=ae[1],le=document.querySelector(".App");Object(n.useEffect)((function(){re(!0)}),[W,r,G]),Object(n.useEffect)((function(){if($&&O&&!Z)return ee(!0),setTimeout((function(){ne||(ee(!1),le.addEventListener("scroll",ie))}),1500),re(!1),function(){K(0),le.removeEventListener("scroll",ie)}}),[$]),Object(n.useEffect)((function(){if(O)return le.addEventListener("scroll",ie),function(){K(0),le.removeEventListener("scroll",ie)};g&&y(r,"get",Object.assign({action:"show_title"},s)).then((function(e){B(e.data.title)}))}),[]);var re=function(e){var t={};$&&(t.offset=$);var a=r;s&&(t=Object.assign(t,s)),v&&(a+="?lang=".concat(W)),y(a,N,t).then((function(a){if(console.log(a,t),L(!1),a.data.error)return _(a.data.error),!1;if(!a.data.hasOwnProperty("items"))return _("List items didn't received"),!1;var n=a.data.items;return i&&(n=n.sort((function(e,t){return e.fragment>t.fragment?1:e.fragment<t.fragment?-1:0}))),P(e?n:[].concat(Object(d.a)(A),Object(d.a)(n))),n.length||ce(!0),!0})).catch((function(e){_(e.toString())}))},oe=function(){le.removeEventListener("scroll",ie);K($+100)},ie=function(){var e=le.scrollTop;le.scrollHeight-e-window.innerHeight<700&&oe()},ue=null;return ue=I&&!x?c.a.createElement(p,null):c.a.createElement(S,{tableData:t,columnWithLink:a,actions:l,listItems:A,setError:_,setIsLoading:L,setListItems:P,type:r}),c.a.createElement("div",null,x?c.a.createElement(b,null,x):null,q?c.a.createElement("h1",null,q):null,ue,c.a.createElement((function(){return!O||I||ne?null:Z?c.a.createElement(p,null):c.a.createElement("div",{className:"text-center"},c.a.createElement("button",{className:"btn btn-default",onClick:oe},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451"))}),null))},C=function(e){var t=e.link,a=void 0===t?"create/":t;return c.a.createElement("p",null,c.a.createElement(o.b,{to:a,className:"btn btn-success mb-3"},"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"))},T=function(){return c.a.createElement("div",null,c.a.createElement(C,null),c.a.createElement(_,{tableData:["name","code"],columnWithLink:0,actions:["edit","delete"],type:"languages"}))},I=function(e){var t=e.name,a=e.label,n=e.value,l=e.setValue,r=e.changedFieldFlag,o=void 0!==r&&r,i=e.markAsNoChanged,u=void 0===i?null:i,s=o?c.a.createElement("button",{type:"button",onClick:u,className:"btn"},c.a.createElement("i",{className:"far fa-edit"})," \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e \u0432\u0440\u0443\u0447\u043d\u0443\u044e"):null;return c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,a),c.a.createElement("input",{type:"text",className:"form-control",name:t,value:n,placeholder:a,onChange:l}),s)},L=function(e){var t=e.name,a=e.label,n=e.value,l=e.setValue,r=e.changedFieldFlag,o=void 0!==r&&r,i=e.markAsNoChanged,u=void 0===i?null:i,s=o?c.a.createElement("button",{type:"button",onClick:u,className:"btn"},c.a.createElement("i",{className:"far fa-edit"})," \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e \u0432\u0440\u0443\u0447\u043d\u0443\u044e"):null;return c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,a),c.a.createElement("textarea",{className:"form-control",name:t,value:n,placeholder:a,onChange:l}),s)},D=a(37),F=a.n(D),A=a(38),P=a.n(A),V=function(e){var t=e.name,a=e.label,n=e.value,l=e.setValue,r=e.changedFieldFlag,o=void 0!==r&&r,i=e.markAsNoChanged,u=void 0===i?null:i,s=o?c.a.createElement("button",{type:"button",onClick:u,className:"btn"},c.a.createElement("i",{className:"far fa-edit"})," \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e \u0432\u0440\u0443\u0447\u043d\u0443\u044e"):null;return c.a.createElement("div",{className:"form-group"},a?c.a.createElement("label",null,a):null,c.a.createElement(F.a,{name:t,editor:P.a,data:n,onChange:function(e,a){l(t,a.getData())}}),s)},U=function(e){var t=e.name,a=e.label,n=e.value,l=e.setValue,r=t+"_"+n;return c.a.createElement("div",{className:"form-check"},c.a.createElement("input",{className:"form-check-input",type:"checkbox",name:t,id:r,value:"1",checked:1===n,onChange:l}),c.a.createElement("label",{className:"form-check-label",htmlFor:r},a))},W=function(e){var t=e.name,a=e.label,n=e.value,l=e.setValue,r=e.variants,o=e.disabled,i=void 0!==o&&o,u=r.map((function(e,t){return c.a.createElement("option",{value:e.name,key:t},e.value)}));return c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,a),c.a.createElement("select",{className:"form-control",name:t,value:n,onChange:l,disabled:i},u))},M=function(e){var t=e.name,a=e.value;return c.a.createElement("input",{type:"hidden",name:t,value:a})},R=function(e){var t=e.name,a=e.value,l=e.initImage,r=e.setValue,o=e.size,i=void 0===o?"1000x1500":o,u=Object(n.useState)(null),s=Object(f.a)(u,2),m=s[0],d=s[1],b=Object(n.useState)(!1),v=Object(f.a)(b,2),y=v[0],O=v[1],j=Object(n.useState)(null),N=Object(f.a)(j,2),k=N[0],w=N[1],x=Object(n.useRef)(null),S=c.a.createElement("div",{className:"image-preview"},m||l?c.a.createElement("img",{src:h+(m||l),alt:""}):"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e"),_=y?c.a.createElement(p,null):k||S;return c.a.createElement("div",{className:"card image-uploader mb-3"},c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"),c.a.createElement("input",{type:"file",className:"form-control-file",ref:x,onChange:function(){O(!0);var e=x.current.files[0];if(e){var a=new FormData;a.set("image",e),a.set("action","image_upload"),a.set("size",i),E.a.post(g,a).then((function(e){e.data.error?w(e.data.error):(d(e.data.image),r(t,e.data.id)),O(!1)})).catch((function(e){w(e.toString()),O(!1)}))}}}),c.a.createElement("input",{type:"hidden",name:t,value:a,onChange:r})),_))},q=function(e){var t=e.label,a=e.isLoading,n=e.align,l=void 0===n?"right":n,r=a?c.a.createElement("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}):null,o=!!a,i="text-".concat(l);return c.a.createElement("div",{className:i},c.a.createElement("p",null,c.a.createElement("button",{type:"submit",className:"btn btn-success",disabled:o},r,t)))},B=function(e){var t=e.currentLanguage,a=e.languageUpdate,l=e.setErrorText,r=(e.match,e.label),o=void 0===r?"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u044f\u0437\u044b\u043a \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f":r,i=Object(n.useState)([]),u=Object(f.a)(i,2),s=u[0],m=u[1];Object(n.useEffect)((function(){y("languages/codes").then((function(e){if(!e.data.items)return l("Can't get language list"),!1;m(e.data.items)})).catch((function(e){l(e.toString())}))}),[]);var d=s.map((function(e,t){return c.a.createElement("option",{value:e,key:t},e)}));return c.a.createElement("div",{className:"card mb-5 mt-3 bg-light"},c.a.createElement("div",{className:"card-header"},o),c.a.createElement("div",{className:"card-body"},c.a.createElement("select",{name:"language",id:"languages",className:"form-control",value:t,onChange:function(e){a(e.target.value)}},d)))},z=function(e){var t=e.children;return c.a.createElement("div",{className:"alert alert-success",role:"alert"},t)},H=Object(i.g)((function(e){return c.a.createElement("div",{className:"back-btn"},c.a.createElement("a",{href:"/",className:"btn btn-light",onClick:function(t){t.preventDefault(),e.history.goBack()}},"\u2190 \u041d\u0430\u0437\u0430\u0434"))})),G=function(e){var t=e.fieldsToShow,a=e.itemType,l=e.itemId,r=void 0===l?null:l,o=e.multilang,s=void 0!==o&&o,m=e.extraParams,p=void 0===m?null:m,v=e.trackChanges,E=void 0!==v&&v,g=Object(n.useState)(t),h=Object(f.a)(g,2),N=h[0],k=h[1],w=t.reduce((function(e,t){return e[t.name]=t.hasOwnProperty("variants")?t.variants[0].name:"",e}),{}),x=Object(n.useState)(w),S=Object(f.a)(x,2),_=S[0],C=S[1],T=Object(n.useState)([]),D=Object(f.a)(T,2),F=D[0],A=D[1],P=Object(n.useState)(null),G=Object(f.a)(P,2),J=G[0],Y=G[1],$=Object(n.useState)(null),K=Object(f.a)($,2),Q=K[0],X=K[1],Z=Object(n.useState)(!1),ee=Object(f.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(n.useState)(window.localStorage.getItem("picked_lang")||"en"),ce=Object(f.a)(ne,2),le=ce[0],re=ce[1],oe=Object(n.useState)(null),ie=Object(f.a)(oe,2),ue=ie[0],se=ie[1];Object(n.useEffect)((function(){var e;p&&p.hasOwnProperty("group_id")&&(e=p.group_id,new Promise((function(t){y({action:"get_field_type",id:e}).then((function(e){e.data.hasOwnProperty("type")&&t(e.data.type),t(null)}))}))).then((function(e){e&&k((function(t){return t.reduce((function(t,a){var n="content"===a.name?Object(j.a)({},a,{type:e}):a;return t.push(n),t}),[])}))}))}),[]),Object(n.useEffect)((function(){r&&(ae(!0),y("".concat(a,"/").concat(r,"?lang=").concat(le),"get",{lang:le}).then((function(e){if(e.data.item){var t=e.data.item,a=Object.assign({},w);Object.keys(t).forEach((function(e){a.hasOwnProperty(e)&&t[e]&&(a[e]=t[e])})),C(a),ae(!1),E&&t.changed_fields&&A(t.changed_fields.split(",")),console.log(e)}else Y("Object with ID ".concat(r," was not found"))})).catch((function(e){ae(!1),Y(e.toString())})))}),[le]);var me=ue?c.a.createElement(i.a,{to:ue}):null,de=function(e,t){return E&&!F.includes(e)&&A([].concat(Object(d.a)(F),[e])),C(Object(j.a)({},_,Object(O.a)({},e,t)))},fe=function(e){var t=e.target;de(t.name,t.value)},pe=function(e,t){te||de(e,t)},be=function(e){var t=e.target,a=Number(t.checked);de(t.name,a)},ve=N.map((function(e,t){var a=E&&F.includes(e.name),n=E?function(){return A(F.filter((function(t){return t!==e.name})))}:null;switch(e.type){case"textarea":return c.a.createElement(L,{key:t,name:e.name,label:e.title,value:_[e.name],setValue:fe,changedFieldFlag:a,markAsNoChanged:n});case"editor":return c.a.createElement(V,{key:t,name:e.name,label:e.title,value:_[e.name],setValue:pe,changedFieldFlag:a,markAsNoChanged:n});case"checkbox":return c.a.createElement(U,{key:t,name:e.name,label:e.title,value:_[e.name],setValue:be});case"select":return c.a.createElement(W,{key:t,name:e.name,label:e.title,value:_[e.name],setValue:fe,variants:e.variants});case"hidden":return c.a.createElement(M,{key:t,name:e.name,value:_[e.name]});case"image":return c.a.createElement(R,{key:t,name:e.name,value:_[e.name],initImage:_.img,size:"197x116",setValue:de});case"none":break;default:return c.a.createElement(I,{key:t,name:e.name,label:e.title,value:_[e.name],setValue:fe,changedFieldFlag:a,markAsNoChanged:n})}})),Ee=function(){var e=J?c.a.createElement(b,null,J):null,t=Q?c.a.createElement(z,null,Q):null;return c.a.createElement("div",null,e,t)};return c.a.createElement("div",null,me,c.a.createElement(H,null),Ee(),c.a.createElement("form",{action:"/bnd/",onSubmit:function(e){e.preventDefault(),ae(!0);var t=a+(r?"/".concat(r):""),n=Object.assign(_,r?{_method:"PUT"}:{});s&&(n=Object.assign(n,{lang:le})),p&&(n=Object.assign(n,p)),E&&(n.changed_fields=F.join(",")),X(null),Y(null),console.log(n),y(t,"post",n).then((function(e){ae(!1),console.log("response",e);var t=e.data;if(t.hasOwnProperty("error"))return Y(t.error),!1;if(t.hasOwnProperty("required"))return Y("\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u043e\u043b\u044f \u043d\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u044b: "+t.required.join(", ")),!1;if(r)t.hasOwnProperty("success")&&X(t.success);else{if(console.log("new itemId",r),!t.hasOwnProperty("id"))return Y("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u044d\u043b\u0435\u043c\u0435\u043d\u0442");var a=function(e){var t=window.location.href.split(u);return u+t[1].replace("/create/","/"+e+"/edit/")}(t.id);se(a)}})).catch((function(e){console.log("catch error",e),ae(!1),Y(e.toString())}))}},s?c.a.createElement(B,{setErrorText:Y,currentLanguage:le,languageUpdate:function(e){re(e),window.localStorage.setItem("picked_lang",e)}}):null,ve,Ee(),c.a.createElement(q,{label:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isLoading:te})))},J=[{name:"id",type:"hidden"},{name:"name",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",type:"text"},{name:"code",title:"\u041a\u043e\u0434 \u044f\u0437\u044b\u043a\u0430",type:"text"},{name:"html_code",title:"HTML \u043a\u043e\u0434 \u044f\u0437\u044b\u043a\u0430",type:"text"}],Y=function(){return c.a.createElement("div",{className:"create-page"},c.a.createElement("h1",null,"\u041d\u043e\u0432\u044b\u0439 \u042f\u0437\u044b\u043a"),c.a.createElement(G,{fieldsToShow:J,itemType:"languages",actionType:"save"}))},$=function(e){var t=e.match;return console.log(J),c.a.createElement("div",{className:"edit-page"},c.a.createElement("h1",null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u044f\u0437\u044b\u043a\u0430"),c.a.createElement(G,{fieldsToShow:J,itemType:"languages",itemId:Number(t.params.id)}))},K=function(){var e=Object(n.useState)({}),t=Object(f.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(window.localStorage.getItem("picked_lang")||"en"),o=Object(f.a)(r,2),i=o[0],u=o[1],s=Object(n.useState)(!0),m=Object(f.a)(s,2),d=m[0],p=m[1],v=Object(n.useState)(!1),E=Object(f.a)(v,2),g=E[0],h=E[1],N=Object(n.useState)(null),k=Object(f.a)(N,2),w=k[0],x=k[1];Object(n.useEffect)((function(){p(!0),y("settings?lang=".concat(i),"get").then((function(e){if(e.data.items){var t=e.data.items,a=Object.keys(t).reduce((function(e,a){return Object.assign(e,Object(O.a)({},t[a].name,{value:t[a].value||"",name:t[a].id,title:t[a].title,type:t[a].type}))}),{});l((function(e){return Object(j.a)({},e,{},a)})),p(!1)}}))}),[i]);var S=function(e){var t=e.target;l(Object(j.a)({},a,Object(O.a)({},t.name,Object(j.a)({},a[t.name],{value:t.value}))))},_=function(e,t){l(Object(j.a)({},a,Object(O.a)({},e,Object(j.a)({},a[e],{value:t}))))},C=Object.keys(a).map((function(e,t){return c.a.createElement("div",{className:"form-group",key:t},c.a.createElement("label",null,a[e].title),function(e){var t=a[e];switch(t.type){case"editor":return c.a.createElement(V,{setValue:_,name:e,value:t.value});case"textarea":return c.a.createElement("textarea",{type:"text",className:"form-control",name:e,value:t.value,placeholder:t.title,onChange:S,onClick:function(e){console.log(a)}});default:return c.a.createElement("input",{type:"text",className:"form-control",name:e,value:t.value,placeholder:t.title,onChange:S,onClick:function(e){console.log(a)}})}}(e))}));return c.a.createElement("div",{className:"local-settings"},c.a.createElement(B,{setErrorText:h,currentLanguage:i,languageUpdate:function(e){u(e),window.localStorage.setItem("picked_lang",e)}}),function(){var e=g?c.a.createElement(b,null,g):null,t=w?c.a.createElement(z,null,w):null;return c.a.createElement("div",null,e,t)}(),c.a.createElement("form",{action:"",onSubmit:function(e){e.preventDefault(),p(!0);var t=Object(j.a)({item_type:"local_settings",lang:i},Object.keys(a).reduce((function(e,t){return Object.assign(e,Object(O.a)({},t,a[t].value))}),{}));y("settings","post",t).then((function(e){p(!1),x("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b")}))}},C,c.a.createElement(q,{label:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isLoading:d})))},Q=function(){return c.a.createElement("div",null,c.a.createElement(C,null),c.a.createElement(_,{tableData:["name","country_code","total_tours"],columnWithLink:0,actions:["edit","delete","show"],type:"countries",multilang:!0}))},X=[{name:"id",type:"hidden"},{name:"name",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",type:"text"},{name:"name_in_case",title:'\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441 \u043f\u0440\u0435\u0434\u043b\u043e\u0433\u043e\u043c "\u0412"',type:"text"},{name:"name_of_case",title:'\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441 \u043f\u0440\u0435\u0434\u043b\u043e\u0433\u043e\u043c "\u043a\u043e\u0433\u043e/\u0447\u0435\u0433\u043e"',type:"text"},{name:"slug",title:"URL",type:"text"},{name:"country_code",title:"\u041a\u043e\u0434 \u0441\u0442\u0440\u0430\u043d\u044b",type:"text"},{name:"title",title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",type:"text"},{name:"announce",title:"\u0422\u0435\u043a\u0441\u0442 \u0441\u0432\u0435\u0440\u0445\u0443",type:"editor"},{name:"title_bottom",title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441\u043d\u0438\u0437\u0443",type:"text"},{name:"content",title:"\u0422\u0435\u043a\u0441\u0442 \u0441\u043d\u0438\u0437\u0443",type:"editor"},{name:"meta_description",title:"META Description",type:"textarea"},{name:"changed_fields",type:"hidden"}],Z=function(){return c.a.createElement("div",{className:"create-page"},c.a.createElement("h1",null,"\u041d\u043e\u0432\u0430\u044f \u0441\u0442\u0440\u0430\u043d\u0430"),c.a.createElement(G,{fieldsToShow:X,itemType:"countries",actionType:"save",multilang:!0,trackChanges:!0}))},ee=function(e){var t=e.match;return c.a.createElement("div",{className:"edit-page"},c.a.createElement("h1",null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0440\u0430\u043d\u044b"),c.a.createElement(G,{fieldsToShow:X,itemType:"countries",itemId:Number(t.params.id),multilang:!0,trackChanges:!0}))},te=function(e){var t=e.match.params.id;return c.a.createElement("div",null,c.a.createElement(H,null),c.a.createElement(C,null),c.a.createElement(_,{tableData:["name","country_code","total_tours"],columnWithLink:0,actions:["edit","delete"],type:"locations/country/".concat(t,"/"),multilang:!0}))},ae=[{name:"id",type:"hidden"},{name:"name",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",type:"text"},{name:"name_in_case",title:'\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441 \u043f\u0440\u0435\u0434\u043b\u043e\u0433\u043e\u043c "\u0412"',type:"text"},{name:"name_of_case",title:'\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441 \u043f\u0440\u0435\u0434\u043b\u043e\u0433\u043e\u043c "\u043a\u043e\u0433\u043e/\u0447\u0435\u0433\u043e"',type:"text"},{name:"slug",title:"URL",type:"text"},{name:"title",title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",type:"text"},{name:"announce",title:"\u0422\u0435\u043a\u0441\u0442 \u0441\u0432\u0435\u0440\u0445\u0443",type:"editor"},{name:"title_bottom",title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441\u043d\u0438\u0437\u0443",type:"text"},{name:"content",title:"\u0422\u0435\u043a\u0441\u0442 \u0441\u043d\u0438\u0437\u0443",type:"editor"},{name:"meta_description",title:"META Description",type:"textarea"},{name:"country_code",title:"\u041a\u043e\u0434 \u0441\u0442\u0440\u0430\u043d\u044b",type:"hidden"},{name:"api_id",title:"API ID",type:"hidden"},{name:"api_parent_id",title:"API parent ID",type:"hidden"},{name:"type",title:"API type",type:"hidden"},{name:"lat",title:"Lat",type:"hidden"},{name:"long",title:"Long",type:"hidden"},{name:"changed_fields",type:"hidden"}],ne=function(e){var t=e.match;return c.a.createElement("div",{className:"edit-page"},c.a.createElement("h1",null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043b\u043e\u043a\u0430\u0446\u0438\u0438"),c.a.createElement(G,{fieldsToShow:ae,itemType:"locations",itemId:Number(t.params.id),multilang:!0,trackChanges:!0}))},ce=function(){return c.a.createElement("div",{className:"create-page"},c.a.createElement("h1",null,"\u041d\u043e\u0432\u0430\u044f \u043b\u043e\u043a\u0430\u0446\u0438\u044f"),c.a.createElement(G,{fieldsToShow:ae,itemType:"locations",actionType:"save",multilang:!0,trackChanges:!0}))},le=function(){return c.a.createElement("div",null,c.a.createElement(C,null),c.a.createElement(_,{tableData:["code","sign"],columnWithLink:0,actions:["edit","delete"],type:"currencies"}))},re=[{name:"id",type:"hidden"},{name:"code",title:"\u041a\u043e\u0434 \u0432\u0430\u043b\u044e\u0442\u044b",type:"text"},{name:"sign",title:"\u041e\u0431\u043e\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0435",type:"text"}],oe=function(){return c.a.createElement("div",{className:"create-page"},c.a.createElement("h1",null,"\u041d\u043e\u0432\u0430\u044f \u0432\u0430\u043b\u044e\u0442\u0430"),c.a.createElement(G,{fieldsToShow:re,itemType:"currencies",actionType:"save"}))},ie=function(e){var t=e.match;return console.log(re),c.a.createElement("div",{className:"edit-page"},c.a.createElement("h1",null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0432\u0430\u043b\u044e\u0442\u044b"),c.a.createElement(G,{fieldsToShow:re,itemType:"currencies",itemId:Number(t.params.id)}))},ue=a(3),se=a.n(ue),me=a(6),de=function(e){var t=e.links,a=e.current,n=e.setCurrent,l=e.extraClassName,r=void 0===l?"nav-tabs":l,o=Object.keys(t).map((function(e,l){return c.a.createElement("li",{className:"nav-item",key:l},c.a.createElement("a",{className:"nav-link ".concat(a===e?"active":null),href:"#",onClick:function(t){t.preventDefault(),n(e)}},t[e]))}));return c.a.createElement("ul",{className:"nav mb-3 ".concat(r)},o)},fe=function(){var e={country:"\u0421\u0442\u0440\u0430\u043d\u0430",country_in:"\u0421\u0442\u0440\u0430\u043d\u0430 \u0441 \u043f\u0440\u0435\u0434\u043b\u043e\u0433\u043e\u043c \u0412",country_of:"\u0421\u0442\u0440\u0430\u043d\u0430 \u0441 \u043f\u0440\u0435\u0434\u043b\u043e\u0433\u043e\u043c \u043a\u043e\u0433\u043e/\u0447\u0435\u0433\u043e",city:"\u0413\u043e\u0440\u043e\u0434",city_in:"\u0413\u043e\u0440\u043e\u0434 \u0441 \u043f\u0440\u0435\u0434\u043b\u043e\u0433\u043e\u043c \u0412",city_of:"\u0413\u043e\u0440\u043e\u0434 \u0441 \u043f\u0440\u0435\u0434\u043b\u043e\u0433\u043e\u043c \u043a\u043e\u0433\u043e/\u0447\u0435\u0433\u043e",tours:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u044d\u043a\u0441\u043a\u0443\u0440\u0441\u0438\u0439",year:"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u0433\u043e\u0434",poi:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0441\u0442\u043e\u043f\u0440\u0438\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438",tag:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u0435\u0433\u0430 (\u0434\u043b\u044f \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b \u0442\u0435\u0433\u043e\u0432)"},t=Object.keys(e).map((function(t,a){return c.a.createElement("li",{key:a},"{".concat(t,"}")," \u2014 ",e[t])}));return c.a.createElement("div",{className:"alert alert-primary mb-3",role:"alert"},"\u0421\u043f\u0438\u0441\u043e\u043a \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0445 \u043f\u0435\u0440\u0435\u043c\u0435\u043d\u043d\u044b\u0445:",c.a.createElement("br",null),c.a.createElement("ul",null,t))},pe=function(e){var t=e.values,a=e.setValues,l=e.name,r=e.label,o=e.type,i=void 0===o?"text":o,u=e.markAsChanged;Object(n.useEffect)((function(){console.log(t),t.length||s()}),[t]);var s=function(){var e=t.length?t[t.length-1].frontendId+1:1;a([].concat(Object(d.a)(t),[{value:"",frontendId:e,id:null}]))},m=function(e,n){u(),a(t.map((function(t){return t.frontendId!==e?t:{value:n,id:t.id,frontendId:e}})))},f=t.length?t.map((function(e,n){var o=e.frontendId,s=e.value,d=e.id,f="editor"!==i?function(e){var t=e.target;m(o,t.value)}:function(e,t){m(o,t)},p=function(e){e.preventDefault(),function(e){u(),a(t.filter((function(t){return t.frontendId!==e})))}(o)},b=(c.a.createElement("a",{href:"#",className:"color-red",onClick:p},c.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})),"".concat(r," (\u0432\u0430\u0440\u0438\u0430\u043d\u0442 ").concat(n+1,")"));return c.a.createElement("div",{className:"row",key:o},c.a.createElement("div",{className:"col-sm-12"},function(e,t,a,n){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=r?1e3+r:e,u={name:l+e,label:n,value:t,setValue:a};switch(i){case"editor":return c.a.createElement(V,Object.assign({},u,{key:o}));case"textarea":return c.a.createElement(L,Object.assign({},u,{key:o}));default:return c.a.createElement(I,Object.assign({},u,{key:o}))}}(o,s,f,b,d),c.a.createElement("button",{type:"button",className:"btn btn-link color-red",onClick:p,style:{top:0,right:0,position:"absolute"}},c.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"}))))})):null,p=c.a.createElement("div",{className:"text-right"},c.a.createElement("button",{type:"button",onClick:s,className:"btn btn-warning"},"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u043d\u0442"));return c.a.createElement("div",{className:"template-inputs mb-5"},f,p)},be=function(){var e={country:"\u0421\u0442\u0440\u0430\u043d\u0430",location:"\u0413\u043e\u0440\u043e\u0434",poi:"\u0414\u043e\u0441\u0442\u043e\u043f\u0440\u0438\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c"},t=Object(n.useState)("country"),a=Object(f.a)(t,2),l=a[0],r=a[1],o={title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",announce:"\u0422\u0435\u043a\u0441\u0442 \u0441\u0432\u0435\u0440\u0445\u0443",title_bottom:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441\u043d\u0438\u0437\u0443",content:"\u0422\u0435\u043a\u0441\u0442 \u0441\u043d\u0438\u0437\u0443",meta_description:"META Description"},i=["announce","content"],u=["meta_description"],s=Object(n.useState)("title"),m=Object(f.a)(s,2),d=m[0],b=m[1],v=Object(n.useState)(!1),E=Object(f.a)(v,2),g=E[0],h=E[1],O=Object(n.useState)([]),j=Object(f.a)(O,2),N=j[0],k=j[1],w=Object(n.useState)(null),x=Object(f.a)(w,2),S=(x[0],x[1]),_=Object(n.useState)(null),C=Object(f.a)(_,2),T=(C[0],C[1],Object(n.useState)(window.localStorage.getItem("picked_lang")||"en")),I=Object(f.a)(T,2),L=I[0],D=I[1],F=Object(n.useState)(!0),A=Object(f.a)(F,2),P=A[0],V=A[1],U=Object(n.useState)(!1),W=Object(f.a)(U,2),M=W[0],R=W[1];Object(n.useEffect)((function(){z()}),[d,l,L]);var z=function(){var e=Object(me.a)(se.a.mark((function e(){var t;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V(!0),e.next=3,y("templates/".concat(L,"/").concat(l,"/").concat(d));case 3:t=e.sent,console.log(t),k(t.data.items&&t.data.items.length?t.data.items.map((function(e,t){return e.frontendId=t,e})):[]),V(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(me.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!0),e.next=3,y("templates/".concat(L,"/").concat(l,"/").concat(d),"post",{values:N,_method:"PUT"},!0);case 3:e.sent,R(!1),h(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){window.confirm("\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f?")?H():h(!1),h(!1)},J=function(e,t){g&&G(),t(e)},Y=function(e){return i.includes(e)?"editor":u.includes(e)?"textarea":"text"},$=function(){g||h(!0)},K=function(e){e.preventDefault(),H(),console.log("saved!")};return c.a.createElement("div",null,c.a.createElement(B,{setErrorText:S,currentLanguage:L,languageUpdate:function(e){g&&G(),D(e),window.localStorage.setItem("picked_lang",e)}}),c.a.createElement(de,{current:l,setCurrent:function(e){J(e,r)},links:e}),c.a.createElement(de,{current:d,setCurrent:function(e){J(e,b)},links:o,extraClassName:"nav-pills"}),c.a.createElement("h2",null,e[l],": ",o[d]," (",L,")"),c.a.createElement(fe,null),P?c.a.createElement(p,null):c.a.createElement("form",{onSubmit:K},c.a.createElement(pe,{name:d,label:o[d],values:N,setValues:k,type:Y(d),markAsChanged:$}),c.a.createElement(q,{label:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isLoading:M})))},ve=function(e){e.match;var t=Object(n.useState)([{name:"all",value:"\u0412\u0441\u0435 \u0441\u0442\u0440\u0430\u043d\u044b"}]),a=Object(f.a)(t,2),l=a[0],r=a[1],o=Object(n.useState)("all"),i=Object(f.a)(o,2),u=i[0],s=i[1],m=[{name:"all",value:"\u0412\u0441\u0435 \u0433\u043e\u0440\u043e\u0434\u0430"}],p=Object(n.useState)(m),b=Object(f.a)(p,2),v=b[0],E=b[1],g=Object(n.useState)("all"),h=Object(f.a)(g,2),O=h[0],j=h[1];Object(n.useEffect)((function(){N()}),[]),Object(n.useEffect)((function(){w()}),[u]);var N=function(){var e=Object(me.a)(se.a.mark((function e(){var t,a;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y("countries?order=name");case 2:if((t=e.sent).data.items){e.next=5;break}return e.abrupt("return");case 5:a=t.data.items.map((function(e){return{name:e.country_code,value:e.name}})),r([].concat(Object(d.a)(l),Object(d.a)(a)));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){E(m),j("all")},w=function(){var e=Object(me.a)(se.a.mark((function e(){var t,a;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("all"!==u){e.next=3;break}return k(),e.abrupt("return");case 3:return e.next=5,y("locations/all?country=".concat(u));case 5:if((t=e.sent).data.items){e.next=9;break}return k(),e.abrupt("return");case 9:a=t.data.items.map((function(e){return{name:e.api_id,value:e.name}})),E([].concat(m,Object(d.a)(a)));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return c.a.createElement("div",{"data-country":u},c.a.createElement("div",{className:"row mb-5"},c.a.createElement("div",{className:"col-sm-4"},c.a.createElement(W,{name:"country",label:"\u0421\u0442\u0440\u0430\u043d\u0430",value:u,setValue:function(e){s(e.target.value)},variants:l})),c.a.createElement("div",{className:"col-sm-4"},c.a.createElement(W,{name:"city",label:"\u0413\u043e\u0440\u043e\u0434",value:O,setValue:function(e){j(e.target.value)},variants:v,disabled:"all"===u}))),c.a.createElement(_,{tableData:["name","country_code","total_tours"],columnWithLink:0,actions:["edit"],type:"poi",multilang:!1,paginationEnabled:!0,requestMethod:"post",extraParams:{country:u,city:O},key:"all"===O?u:O}))},Ee=function(){return c.a.createElement("div",null,c.a.createElement(C,null),c.a.createElement(_,{tableData:["name"],columnWithLink:0,actions:["edit","delete"],type:"tags",multilang:!0}))},ge=[{name:"id",type:"hidden"},{name:"name",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",type:"text"},{name:"get_your_guide_id",title:"GetYourGuide API",type:"text"},{name:"slug",title:"URL",type:"text"}],he=function(){return c.a.createElement("div",{className:"create-page"},c.a.createElement("h1",null,"\u041d\u043e\u0432\u044b\u0439 \u0442\u0435\u0433"),c.a.createElement(G,{fieldsToShow:ge,itemType:"tags",actionType:"save",multilang:!0}))},ye=function(e){var t=e.tagId,a=Object(n.useState)([]),l=Object(f.a)(a,2),r=l[0],o=l[1],i={title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",announce:"\u0422\u0435\u043a\u0441\u0442 \u0441\u0432\u0435\u0440\u0445\u0443",title_bottom:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0441\u043d\u0438\u0437\u0443",content:"\u0422\u0435\u043a\u0441\u0442 \u0441\u043d\u0438\u0437\u0443",meta_description:"META Description"},u=["announce","content"],s=["meta_description"],m=Object(n.useState)("title"),d=Object(f.a)(m,2),b=d[0],v=d[1],E=Object(n.useState)(window.localStorage.getItem("picked_lang")||"en"),g=Object(f.a)(E,2),h=g[0],O=g[1],j=Object(n.useState)(!0),N=Object(f.a)(j,2),k=N[0],w=N[1],x=Object(n.useState)(!1),S=Object(f.a)(x,2),_=S[0],C=S[1];Object(n.useEffect)((function(){T()}),[b,"tag",h]);var T=function(){var e=Object(me.a)(se.a.mark((function e(){var a;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,y("templates/".concat(h,"/").concat("tag","/").concat(b,"/").concat(t));case 3:a=e.sent,console.log(a),o(a.data.items&&a.data.items.length?a.data.items.map((function(e,t){return e.frontendId=t,e})):[]),w(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(me.a)(se.a.mark((function e(){return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,y("templates/".concat(h,"/").concat("tag","/").concat(b),"post",{values:r,tag_id:t,_method:"PUT"},!0);case 3:e.sent,C(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){e.preventDefault(),I(),console.log("saved!")},D=function(e){return u.includes(e)?"editor":s.includes(e)?"textarea":"text"};return c.a.createElement("div",{className:"row mt-3"},c.a.createElement("div",{className:"col-sm-12"},c.a.createElement("h2",null,"\u0428\u0430\u0431\u043b\u043e\u043d\u043d\u044b\u0435 \u043f\u043e\u043b\u044f \u0442\u0435\u0433\u0430"),c.a.createElement(B,{setErrorText:function(){},currentLanguage:h,languageUpdate:function(e){O(e),window.localStorage.setItem("picked_lang",e)}}),c.a.createElement(de,{current:b,setCurrent:function(e){!function(e,t){t(e)}(e,v)},links:i,extraClassName:"nav-pills"}),c.a.createElement("h3",null,i[b]," (",h,")"),c.a.createElement(fe,null),k?c.a.createElement(p,null):c.a.createElement("form",{onSubmit:L},c.a.createElement(pe,{name:b,label:i[b],values:r,setValues:o,type:D(b),markAsChanged:function(){}}),c.a.createElement(q,{label:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isLoading:_}))))},Oe=function(e){var t=e.match;return c.a.createElement("div",{className:"edit-page"},c.a.createElement("h1",null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0442\u0435\u0433\u0430"),c.a.createElement(G,{fieldsToShow:ge,itemType:"tags",itemId:Number(t.params.id),multilang:!0}),c.a.createElement(ye,{tagId:Number(t.params.id)}))},je=function(){var e={country:"\u0421\u0442\u0440\u0430\u043d\u0430",location:"\u0413\u043e\u0440\u043e\u0434",poi:"\u0414\u043e\u0441\u0442\u043e\u043f\u0440\u0438\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",tag:"\u0422\u0435\u0433"},t=Object(n.useState)(Object.keys(e)),a=Object(f.a)(t,2),l=a[0],r=a[1],o=Object(n.useState)({}),i=Object(f.a)(o,2),u=i[0],s=i[1],m=Object(n.useState)([]),p=Object(f.a)(m,2),b=p[0],v=p[1],E=Object(n.useState)("checking"),g=Object(f.a)(E,2),h=g[0],O=g[1],j=Object(n.useState)(!1),N=Object(f.a)(j,2);N[0],N[1];Object(n.useEffect)((function(){y("languages/codes").then((function(e){s(e.data.items.reduce((function(e,t){return e[t]=t,e}),{})),v(e.data.items)})).catch((function(e){console.log(e.toString())})),k();var e=setInterval(k,1e4);return function(){clearInterval(e)}}),[]),Object(n.useEffect)((function(){console.log(u,b)}),[u,b]);var k=function(){y("templates/generate/status","post").then((function(e){O(e.data.status)})).catch((function(e){console.log(e.toString())}))},w=function(e,t,a){return Object.keys(e).map((function(n,l){var r=t.includes(n);return c.a.createElement("div",{className:"form-check",key:l},c.a.createElement("input",{className:"form-check-input",type:"checkbox",id:n,checked:r,onChange:function(){a(r?t.filter((function(e){return e!==n})):[].concat(Object(d.a)(t),[n]))}}),c.a.createElement("label",{className:"form-check-label",htmlFor:n},e[n]))}))},x=function(){var e=Object(me.a)(se.a.mark((function e(){var t;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O("in_progress"),e.next=3,y("templates/generate","post",{langs:b,page_types:l},!0);case 3:t=e.sent,console.log(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e){x()};return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"row mb-5"},c.a.createElement("div",{className:"col-sm-6"},c.a.createElement("h4",null,"\u042f\u0437\u044b\u043a\u0438"),w(u,b,v)),c.a.createElement("div",{className:"col-sm-6"},c.a.createElement("h4",null,"\u0422\u0438\u043f\u044b \u0441\u0442\u0440\u0430\u043d\u0438\u0446"),w(e,l,r))),function(){switch(h){case"checking":return null;case"in_progress":return c.a.createElement("button",{type:"button",className:"btn btn-primary btn-lg btn-block",disabled:!0},"\u0418\u0434\u0451\u0442 \u0433\u0435\u043d\u0435\u0440\u0430\u0446\u0438\u044f...");default:return c.a.createElement("button",{type:"button",className:"btn btn-primary btn-lg btn-block",onClick:S},"\u0417\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c")}}())},Ne=function(){return c.a.createElement("div",null,c.a.createElement(C,null),c.a.createElement(_,{tableData:["name"],columnWithLink:0,actions:["edit","delete"],type:"codes"}))},ke=[{name:"id",type:"hidden"},{name:"name",title:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",type:"text"},{name:"value",title:"\u041a\u043e\u0434 \u0434\u043b\u044f \u0432\u0441\u0442\u0430\u0432\u043a\u0438",type:"textarea"}],we=function(){return c.a.createElement("div",{className:"create-page"},c.a.createElement("h1",null,"\u041d\u043e\u0432\u044b\u0439 \u041a\u043e\u0434"),c.a.createElement(G,{fieldsToShow:ke,itemType:"codes",actionType:"save"}))},xe=function(e){var t=e.match;return console.log(ke),c.a.createElement("div",{className:"edit-page"},c.a.createElement("h1",null,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u0434\u0430"),c.a.createElement(G,{fieldsToShow:ke,itemType:"codes",itemId:Number(t.params.id)}))},Se=function(){var e=Object(n.useState)(window.localStorage.getItem("picked_lang")||"en"),t=Object(f.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(!1),o=Object(f.a)(r,2),i=(o[0],o[1]),u=Object(n.useState)("country"),s=Object(f.a)(u,2),m=s[0],d=s[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-12"},c.a.createElement("h2",null,"\u042d\u043a\u0441\u043f\u043e\u0440\u0442"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-6"},c.a.createElement(B,{label:"\u042f\u0437\u044b\u043a",currentLanguage:a,languageUpdate:l,setErrorText:i})),c.a.createElement("div",{className:"col-sm-6"},c.a.createElement(W,{label:"\u0422\u0438\u043f \u0441\u0442\u0440\u0430\u043d\u0438\u0446",name:"type",variants:[{name:"country",value:"\u0421\u0442\u0440\u0430\u043d\u044b"},{name:"city",value:"\u0413\u043e\u0440\u043e\u0434\u0430"},{name:"poi",value:"\u0414\u043e\u0441\u0442\u043e\u043f\u0440\u0438\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438"}],value:m,setValue:function(e){d(e.target.value)}}),c.a.createElement("button",{className:"btn btn-primary btn-lg btn-block",onClick:function(){var e="".concat(g,"export/").concat(a,"/").concat(m);window.open(e)}},"\u042d\u043a\u0441\u043f\u043e\u0440\u0442"))))},_e=function(e){e.file;var t=e.setFile,a=e.label,n=void 0===a?"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0444\u0430\u0439\u043b":a;return c.a.createElement("div",{className:"custom-file"},c.a.createElement("input",{type:"file",className:"custom-file-input",id:"customFile",onChange:t}),c.a.createElement("label",{className:"custom-file-label",htmlFor:"customFile"},n))},Ce=function(){var e=Object(n.useState)(!1),t=Object(f.a)(e,2),a=t[0],l=t[1],r=Object(n.useState)(null),o=Object(f.a)(r,2),i=o[0],u=o[1],s=Object(n.useState)(window.localStorage.getItem("picked_lang")||"en"),m=Object(f.a)(s,2),d=m[0],b=m[1],v=Object(n.useState)(!1),h=Object(f.a)(v,2),y=(h[0],h[1]),O=Object(n.useState)("country"),j=Object(f.a)(O,2),N=j[0],k=j[1],w=Object(n.useState)(null),x=Object(f.a)(w,2),S=x[0],_=x[1],C=function(){var e=Object(me.a)(se.a.mark((function e(){var t,a,n,c;return se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),t="".concat(g,"import/").concat(d,"/").concat(N),(a=new FormData).append("xls",S),n={headers:{"content-type":"multipart/form-data"}},e.next=7,E.a.post(t,a,n);case 7:c=e.sent,console.log(c),l(!1),u("\u0418\u043c\u043f\u043e\u0440\u0442 \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=i?c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-12"},c.a.createElement(z,null,i))):null;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-12"},c.a.createElement("h2",null,"\u0418\u043c\u043f\u043e\u0440\u0442"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-6"},c.a.createElement(B,{label:"\u042f\u0437\u044b\u043a",currentLanguage:d,languageUpdate:b,setErrorText:y})),c.a.createElement("div",{className:"col-sm-6"},c.a.createElement(W,{label:"\u0422\u0438\u043f \u0441\u0442\u0440\u0430\u043d\u0438\u0446",name:"type",variants:[{name:"country",value:"\u0421\u0442\u0440\u0430\u043d\u044b"},{name:"city",value:"\u0413\u043e\u0440\u043e\u0434\u0430"},{name:"poi",value:"\u0414\u043e\u0441\u0442\u043e\u043f\u0440\u0438\u043c\u0435\u0447\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438"}],value:N,setValue:function(e){k(e.target.value)}}),c.a.createElement(_e,{file:S,setFile:function(e){_(e.target.files[0]),u(null)}}))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-sm-12 text-right"},a?c.a.createElement(p,null):c.a.createElement("button",{className:"btn btn-primary",onClick:function(){C()},disabled:!Boolean(S)},"\u0418\u043c\u043f\u043e\u0440\u0442"))),T)};var Te=function(){return c.a.createElement("div",{className:"App container-full"},c.a.createElement("div",{className:"row"},c.a.createElement(o.a,null,c.a.createElement(s,null),c.a.createElement("div",{className:"col-sm-9"},c.a.createElement(i.d,null,c.a.createElement(i.b,{path:"/",exact:!0,component:m}),c.a.createElement(i.b,{path:"".concat(u,"languages/"),exact:!0,component:T}),c.a.createElement(i.b,{path:"".concat(u,"languages/create/"),exact:!0,component:Y}),c.a.createElement(i.b,{path:"".concat(u,"languages/:id/edit/"),exact:!0,component:$}),c.a.createElement(i.b,{path:"".concat(u,"currencies/"),exact:!0,component:le}),c.a.createElement(i.b,{path:"".concat(u,"currencies/create/"),exact:!0,component:oe}),c.a.createElement(i.b,{path:"".concat(u,"currencies/:id/edit/"),exact:!0,component:ie}),c.a.createElement(i.b,{path:"".concat(u,"locations/"),exact:!0,component:Q}),c.a.createElement(i.b,{path:"".concat(u,"locations/create"),exact:!0,component:Z}),c.a.createElement(i.b,{path:"".concat(u,"locations/:id/edit/"),exact:!0,component:ee}),c.a.createElement(i.b,{path:"".concat(u,"locations/:id/"),exact:!0,component:te}),c.a.createElement(i.b,{path:"".concat(u,"locations/:country_id/create"),exact:!0,component:ce}),c.a.createElement(i.b,{path:"".concat(u,"locations/:country_id/:id/edit"),exact:!0,component:ne}),c.a.createElement(i.b,{path:"".concat(u,"poi/"),exact:!0,component:ve}),c.a.createElement(i.b,{path:"".concat(u,"poi/:id/edit"),exact:!0,component:ne}),c.a.createElement(i.b,{path:"".concat(u,"tags/"),exact:!0,component:Ee}),c.a.createElement(i.b,{path:"".concat(u,"tags/create"),exact:!0,component:he}),c.a.createElement(i.b,{path:"".concat(u,"tags/:id/edit/"),exact:!0,component:Oe}),c.a.createElement(i.b,{path:"".concat(u,"templates/"),exact:!0,component:be}),c.a.createElement(i.b,{path:"".concat(u,"settings/"),exact:!0,component:K}),c.a.createElement(i.b,{path:"".concat(u,"generate/"),exact:!0,component:je}),c.a.createElement(i.b,{path:"".concat(u,"codes/"),exact:!0,component:Ne}),c.a.createElement(i.b,{path:"".concat(u,"codes/create"),exact:!0,component:we}),c.a.createElement(i.b,{path:"".concat(u,"codes/:id/edit/"),exact:!0,component:xe}),c.a.createElement(i.b,{path:"".concat(u,"export/"),exact:!0,component:Se}),c.a.createElement(i.b,{path:"".concat(u,"import/"),exact:!0,component:Ce}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(Te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[39,1,2]]]);
//# sourceMappingURL=main.43a93d41.chunk.js.map
